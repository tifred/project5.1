"use strict";function initializeMap(e,n,a){function o(e,n){var o=e.geometry.location.lat(),t=e.geometry.location.lng(),r=e.formatted_address,i=window.mapBounds;if(a.park())var s=new google.maps.Marker({map:map,position:e.geometry.location,title:r,icon:"img/darkgreen_MarkerP.png"});else var s=new google.maps.Marker({map:map,position:e.geometry.location,title:r});google.maps.event.addListener(s,"click",function(e,n){return function(){currentMarker&&currentMarker.setAnimation(null),currentMarker=e,e.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){e.setAnimation(null)},2e3),infoWindow.close(),infoWindow.setContent(n),infoWindow.open(map,e)}}(s,n)),a.marker=s,a.infoLinks=n,i.extend(new google.maps.LatLng(o,t)),map.fitBounds(i),map.setCenter(i.getCenter())}function t(e,n,a){if(n==google.maps.places.PlacesServiceStatus.OK){var t=e[0].name;if(a){var r=setTimeout(function(){var n="<p>Failed to get wikipedia resources.  Sorry.</p>",a=n;o(e[0],a)},8e3);$.ajax({url:"https://en.wikipedia.org/w/api.php?action=opensearch&search="+t+"&format=json",dataType:"jsonp",success:function(n){var a=n[3],t=n[1],i=[];i.push("<ul>");for(var s=0;s<a.length;s++)i.push("<li class='article'> <a href='"+a[s]+"' target='_blank'> "+t[s]+"</a></li>");i.push("</ul>");var p=i.join("");o(e[0],p),clearTimeout(r)}})}else{var i="http://api.nytimes.com/svc/search/v2/articlesearch.json?q="+t+"&sort=newest&api-key=8d6910d8cc45e32cb31931220a4d3c4b:5:73416722";$.getJSON(i).done(function(n){var a=[];a.push("<ul>");for(var t=0;3>t;t++)a.push("<li class='article'> <a href='"+n.response.docs[t].web_url+"' target='_blank'> "+n.response.docs[t].headline.main+"</a> <p>"+n.response.docs[t].snippet+"</p> </li>");a.push("</ul>");var r=a.join("");o(e[0],r)}).fail(function(){var n="<p>Failed to Load the NYT articles.  Sorry.</p>",a=n;o(e[0],a)})}}else $("#map").append("<h3>No results from Google Maps API.</h3>")}function r(e,n){var a=new google.maps.places.PlacesService(map),o={query:e};n?a.textSearch(o,function(e,n){t(e,n,!0)}):a.textSearch(o,function(e,n){t(e,n,!1)})}var i={};map=new google.maps.Map(document.querySelector("#map"),i),infoWindow=new google.maps.InfoWindow,window.mapBounds=new google.maps.LatLngBounds,r(e,n)}var map,currentMarker=null,infoWindow;window.addEventListener("resize",function(e){map.fitBounds(mapBounds),map.setCenter(mapBounds.getCenter())});